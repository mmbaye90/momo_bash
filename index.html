<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©f√©rence Technique Professionnelle Bash</title>
    <!-- Chargement de Tailwind CSS pour un style rapide et responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* CHARTE GRAPHIQUE SYST√àME (Contraste maximal A11y) */
        :root {
            --bg-dark: #000000;      /* Noir pur pour contraste */
            --text-main: #b3f0b3;    /* Vert clair (Accessibilit√© OK) */
            --highlight: #00ff00;    /* Vert de surbrillance (actif) */
            --border-color: #333333; /* Gris fonc√© pour les s√©parateurs */
            --card-bg: #0a0a0a;      /* Fond de carte l√©g√®rement d√©cal√© du body */
            --code-bg: #1a1a1a;      /* Fond sombre pour le terminal */
            --code-border: #00ff00;  /* Bordure du terminal */
        }

        body {
            /* Police Monospace pour corps (ambiance terminal) */
            font-family: 'Consolas', 'Monaco', monospace; 
            background-color: var(--bg-dark);
            color: var(--text-main);
            min-height: 100vh;
            line-height: 1.5;
            padding-top: 3rem; 
        }

        /* Titres en Sans-Serif pour une lisibilit√© accrue (UX) */
        h1, h2, h3, .navbar a {
            font-family: 'Inter', sans-serif;
        }
        p, ul, pre {
            font-size: 0.9rem;
        }

        /* BARRE DE NAVIGATION (MENU) - (Aucun changement) */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.3); 
            border-bottom: 2px solid var(--highlight);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            z-index: 50;
        }

        .navbar-inner-content {
            padding-top: 0.5rem; 
            padding-bottom: 0.5rem; 
        }

        .navbar a {
            color: var(--text-main);
            padding: 0.5rem 0.6rem; /* R√©duit un peu le padding pour plus d'√©l√©ments */
            display: block;
            font-weight: 600;
            transition: background-color 0.2s, color 0.2s, transform 0.1s;
            border-right: 1px solid var(--border-color);
            text-decoration: none;
            cursor: pointer;
            font-size: 0.75rem; /* R√©duit la taille de police sur mobile/petit √©cran */
        }
        @media (min-width: 768px) {
             .navbar a {
                font-size: 0.875rem; /* Taille standard sur desktop */
                padding: 0.5rem 1rem;
            }
        }
        .navbar a:last-child { border-right: none; }

        .navbar a:hover, .navbar a:focus {
            background-color: var(--highlight);
            color: var(--bg-dark);
            outline: 2px solid var(--highlight); 
            outline-offset: -2px;
        }

        .navbar a:active {
            transform: scale(0.98);
            background-color: #00b300;
        }

        /* TITRE PRINCIPAL */
        h1 {
            color: white; 
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.7);
            font-size: 2.5rem; 
        }

        /* CARD/ARTICLE */
        .card {
            background-color: var(--card-bg);
            border-radius: 0.25rem;
            padding: 2.5rem;
            border: 1px solid var(--border-color);
            border-left: 6px solid var(--highlight); /* BASH: VERT */
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.05);
        }

        .article-title {
            color: var(--highlight);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
            font-size: 1.75rem;
            font-weight: 700;
        }
        
        .section-subtitle {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff; 
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        /* TABLEAUX STYLES AJOUT√âS */
        .styled-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.9rem;
            font-family: 'Consolas', monospace;
        }
        .styled-table thead tr {
            background-color: var(--highlight);
            color: var(--bg-dark);
            text-align: left;
        }
        .styled-table th, .styled-table td {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
        }
        .styled-table tbody tr {
            border-bottom: 1px solid var(--border-color);
        }
        .styled-table tbody tr:nth-of-type(even) {
            background-color: var(--card-bg);
        }
        .styled-table tbody tr:hover {
            background-color: rgba(0, 255, 0, 0.1);
        }
        .styled-table td:first-child {
            font-weight: bold;
            color: var(--highlight);
        }


        /* BLOC DE CODE (SIMULATION TERMINAL SNAPSHOT) - (Aucun changement) */
        .code-screen {
            background-color: var(--code-bg); 
            border: 3px solid var(--code-border); 
            border-radius: 0.5rem; 
            margin-top: 1.5rem;
            position: relative;
            padding: 0; 
            overflow: hidden; 
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2); 
        }
        
        .terminal-header {
            background-color: #333333; 
            color: #ffffff;
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            font-family: 'Inter', sans-serif;
            border-bottom: 1px solid var(--code-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .terminal-dots {
            display: flex;
            gap: 5px;
        }

        .terminal-dots span {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        .red { background-color: #ff5f56; }
        .yellow { background-color: #ffbd2e; }
        .green { background-color: #27c93f; }

        .code-content {
            padding: 1.25rem; 
        }

        pre code {
            font-family: 'Consolas', 'Monaco', monospace;
            color: var(--text-main);
            font-size: 0.95rem; 
            white-space: pre-wrap; 
        }
        
        .prompt {
            color: var(--highlight); 
            font-weight: bold;
        }

        /* Bouton Copier (A11y & UI) */
        .copy-btn {
            background-color: var(--highlight);
            color: var(--bg-dark);
            padding: 0.5rem 1rem;
            font-weight: 700;
            transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
            border-radius: 0.25rem;
            text-decoration: none;
            outline: none;
            z-index: 10; 
        }
        .copy-btn:hover, .copy-btn:focus {
            background-color: #33ff33;
            box-shadow: 0 0 5px var(--highlight);
        }
        .copy-btn:active {
            transform: scale(0.95);
        }
        /* Notification (A11y: fort contraste pour le feedback) */
        #notification {
            background-color: #00ff00; 
            color: #000000;            
            font-weight: bold;
        }

        /* NOUVEAUX STYLES AJOUT√âS POUR LES COMMANDES (SysAdmin/DevOps) */
        .guide-block {
            margin-top: 3rem; 
            padding: 2.5rem;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-left: 6px solid var(--highlight); /* COH√âRENCE: VERT au lieu de bleu */
            border-radius: 0.25rem;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.05); /* COH√âRENCE: Ombre verte */
        }

        .guide-block table{
            width:100%;
            border-collapse:collapse;
            margin:10px 0;
            background-color: #0d1117; /* Fond plus fonc√© pour les tableaux de r√©f√©rence */
            border:1px solid #1f2937;
            border-radius:6px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.4);
        }
        .guide-block th, .guide-block td{
            padding:10px;
            text-align:left;
            border-bottom:1px solid #1f2937;
            font-family: 'Consolas', monospace;
        }
        .guide-block th{
            color:var(--highlight); /* COH√âRENCE: Vert */
            background-color:#1c241a; /* Vert/gris fonc√© pour l'en-t√™te (au lieu de bleu/gris) */
            font-weight: 700;
        }
        .guide-block td {
            color: var(--text-main);
            background-color: #0d1117;
        }
        .guide-block tr:nth-child(even) td {
            background-color: #121820; /* Stripage l√©ger */
        }
        .guide-block td:first-child {
            font-weight: 600;
            color: var(--text-main); /* COH√âRENCE: Vert clair pour les commandes (au lieu de bleu clair) */
        }
        
        /* Les titres H2 des nouvelles sections */
        .guide-block h2{
            color:var(--highlight); /* COH√âRENCE: Vert au lieu de bleu */
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            font-size: 1.75rem;
            border-bottom: 1px solid var(--border-color); /* COH√âRENCE: Gris fonc√© */
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
        }
        
        .guide-block .section-title{
            margin-top:24px;
            color:var(--highlight); /* COH√âRENCE: Vert au lieu de bleu */
            font-size:1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .guide-block code {
            font-family: 'Consolas', monospace;
            background-color: rgba(0, 255, 0, 0.1);
            color: var(--highlight);
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.85rem;
        }
        
        .guide-block pre{
            background-color: var(--code-bg);
            color: var(--text-main);
            padding: 15px;
            border-radius:6px;
            overflow:auto;
            position:relative;
            margin:15px 0;
            border: 1px solid #005000;
        }
        
        .btn-copy{
            /* R√©utilise le style du copy-btn existant pour la coh√©rence */
            background-color: var(--highlight);
            color: var(--bg-dark);
            padding: 4px 8px; 
            border-radius: 4px;
            cursor:pointer;
            font-size: 0.75rem;
            font-weight: 700;
            position:absolute;
            top:8px;
            right:8px;
            transition: background-color 0.2s;
        }
        .btn-copy:hover {
            background-color: #33ff33;
        }
        
        @media (max-width:700px){
            .guide-block table, .guide-block th, .guide-block td{font-size:12px}
            .guide-block h2 { font-size: 1.5rem; }
            .navbar-inner-content { justify-content: start; overflow-x: auto; flex-wrap: nowrap; }
            .navbar a { flex-shrink: 0; padding: 0.5rem 0.5rem; }
        }
    </style>
</head>
<body class="p-8">

    <!-- BARRE DE NAVIGATION (MENU) - Mise √† jour avec les nouvelles sections -->
    <nav class="navbar shadow-xl" >
        <div class="container mx-auto px-4">
            <div class="navbar-inner-content flex flex-wrap md:flex-nowrap justify-center text-xs md:text-sm lg:text-base items-center">
                <a href="#article-1">1. Bases</a>
                <a href="#article-2">2. Variables</a>
                <a href="#article-3">3. Conditions</a>
                <a href="#article-4">4. Boucles</a>
                <a href="#article-5">5. Fonctions</a>
                <a href="#article-6">6. Choix</a>
                <a href="#article-7">7. I/O</a>
                <a href="#guide-sysadmin">SysAdmin</a>
                <a href="#guide-devops">DevOps</a>
                <a href="#guide-process">Processus</a>
            </div>
        </div>
    </nav>
    <!-- FIN BARRE DE NAVIGATION -->

    <!-- Notification de Copie (Accessibilit√©: role="status") -->
    <div id="notification" role="status" aria-live="polite" class="hidden">Code Copi√© !</div>

    <div class="container "style="margin-top: 5rem;">
        <header class="text-center mb-16">
            <h1 class="font-extrabold mb-3 uppercase tracking-widest" style="font-family: 'Inter', sans-serif;">
                R√âF√âRENCE TECHNIQUE : PROGRAMMATION SHELL (BASH)
            </h1>
            <p class="text-base italic text-gray-500 border-b border-gray-700 pb-4">
                Synth√®se des concepts fondamentaux pour l'automatisation et l'administration syst√®me.
            </p>
        </header>

        <main class="space-y-12">

            <!-- ARTICLES BASH SCRIPTING EXISTANTS -->
            
            <!-- ARTICLE 1: Les bases du Shell et des Scripts -->
            <article id="article-1" class="card">
                <h2 class="article-title">1. Principes Fondamentaux et Structure</h2>
                <p>
                    Le Shell agit comme l'interpr√©teur de commandes du syst√®me d'exploitation. **Bash** (Bourne Again Shell) est le langage de script standard pour l'automatisation sur les plateformes Linux/Unix. Un script garantit l'ex√©cution s√©quentielle d'une s√©rie de commandes.
                </p>

                <h3 class="section-subtitle">Structure du Script (Shebang et Permissions)</h3>
                <p>
                    Le <em>Shebang</em> `#!/bin/bash` est obligatoire pour sp√©cifier l'interpr√©teur. Les scripts doivent √™tre rendus ex√©cutables via `chmod +x`.
                </p>

                <!-- Exemple 1: Hello World -->
                <div class="code-screen">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="red"></span>
                            <span class="yellow"></span>
                            <span class="green"></span>
                        </div>
                        <div class="terminal-title font-semibold">mon_script.sh ‚Äî Bash Shell</div>
                        <div>&nbsp;</div>
                    </div>
                    <div class="code-content">
                        <pre><code id="code-ex1">#!/bin/bash
# Description: Script de test initial.
echo "Initialisation du processus..."

# Ex√©cution dans le terminal :
<span class="prompt">$</span> chmod +x mon_script.sh
<span class="prompt">$</span> ./mon_script.sh
Initialisation du processus...</code></pre>
                        <button class="copy-btn absolute top-3 right-3 rounded-sm text-sm" onclick="copyCode('code-ex1')">
                            Copier
                        </button>
                    </div>
                </div>
            </article>

            <!-- ARTICLE 2: Variables et Arguments -->
            <article id="article-2" class="card">
                <h2 class="article-title">2. D√©claration et Utilisation des Variables</h2>
                <p>
                    Les variables sont non typ√©es et d√©clar√©es sans `$`. Pour la substitution, le pr√©fixe `$` est utilis√© (e.g., `$MA_VARIABLE`). L'utilisation de guillemets doubles est recommand√©e pour √©viter les probl√®mes d'espaces.
                </p>

                <h3 class="section-subtitle">Acc√®s aux Arguments de Position</h3>
                <p>
                    Les scripts acc√®dent aux param√®tres pass√©s en ligne de commande via des variables de position : `$1`, `$2`, etc. `$0` est le nom du script, `$#` le nombre d'arguments, et `$@` repr√©sente tous les arguments.
                </p>

                <!-- Exemple 2: Variables et Arguments -->
                <div class="code-screen">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="red"></span>
                            <span class="yellow"></span>
                            <span class="green"></span>
                        </div>
                        <div class="terminal-title font-semibold">rapport.sh ‚Äî Bash Shell</div>
                        <div>&nbsp;</div>
                    </div>
                    <div class="code-content">
                        <pre><code id="code-ex2">#!/bin/bash
# Stockage d'une commande dans une variable (commande substitution)
DATE_EXECUTION=$(date "+%Y-%m-%d %H:%M:%S")

echo "--- Rapport d'Ex√©cution ---"
echo "Programme: $0 (Arguments re√ßus: $#)"

if [ "$#" -eq 1 ]; then
    echo "Param√®tre 1 trait√©: $1"
else
    echo "Avertissement: Un argument unique est attendu."
fi

echo "Heure de d√©marrage: $DATE_EXECUTION"

# Appel exemple :
<span class="prompt">$</span> ./rapport.sh ConfigFile.conf
--- Rapport d'Ex√©cution ---
Programme: ./rapport.sh (Arguments re√ßus: 1)
Param√®tre 1 trait√©: ConfigFile.conf
Heure de d√©marrage: 2024-10-29 11:32:00</code></pre>
                        <button class="copy-btn absolute top-3 right-3 rounded-sm text-sm" onclick="copyCode('code-ex2')">
                            Copier
                        </button>
                    </div>
                </div>
            </article>

            <!-- ARTICLE 3: Conditions (if/then/else) -->
            <article id="article-3" class="card">
                <h2 class="article-title">3. Contr√¥le de Flux Conditionnel (IF)</h2>
                <p>
                    La structure `if/then/elif/else/fi` permet la prise de d√©cision. Les expressions de test sont √©valu√©es √† l'int√©rieur de crochets simples `[ ]` ou doubles `[[ ]]`.
                </p>

                <h3 class="section-subtitle">Op√©rateurs de Test Num√©rique</h3>
                <p>Utilis√©s pour comparer des entiers (dans `[ ]` ou `[[ ]]`).</p>
                <table class="styled-table">
                    <thead>
                        <tr>
                            <th>Op√©rateur</th>
                            <th>Description</th>
                            <th>Exemple</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>`-eq`</td>
                            <td>Est √©gal √†</td>
                            <td>`[ $A -eq $B ]`</td>
                        </tr>
                        <tr>
                            <td>`-ne`</td>
                            <td>N'est pas √©gal √†</td>
                            <td>`[ $A -ne $B ]`</td>
                        </tr>
                        <tr>
                            <td>`-gt`</td>
                            <td>Strictement sup√©rieur √†</td>
                            <td>`[ $A -gt $B ]`</td>
                        </tr>
                        <tr>
                            <td>`-ge`</td>
                            <td>Sup√©rieur ou √©gal √†</td>
                            <td>`[ $A -ge $B ]`</td>
                        </tr>
                        <tr>
                            <td>`-lt`</td>
                            <td>Strictement inf√©rieur √†</td>
                            <td>`[ $A -lt $B ]`</td>
                        </tr>
                        <tr>
                            <td>`-le`</td>
                            <td>Inf√©rieur ou √©gal √†</td>
                            <td>`[ $A -le $B ]`</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3 class="section-subtitle">Op√©rateurs de Test de Cha√Æne</h3>
                <p>Utilis√©s pour comparer des cha√Ænes de caract√®res (dans `[ ]` ou `[[ ]]`).</p>
                <table class="styled-table">
                    <thead>
                        <tr>
                            <th>Op√©rateur</th>
                            <th>Description</th>
                            <th>Exemple</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>`=` ou `==`</td>
                            <td>Est √©gal √† (Note: `==` est pr√©f√©rable dans `[[ ]]`)</td>
                            <td>`[ "$S1" = "$S2" ]`</td>
                        </tr>
                        <tr>
                            <td>`!=`</td>
                            <td>N'est pas √©gal √†</td>
                            <td>`[ "$S1" != "$S2" ]`</td>
                        </tr>
                        <tr>
                            <td>`-z`</td>
                            <td>La cha√Æne est vide (longueur nulle)</td>
                            <td>`[ -z "$S1" ]`</td>
                        </tr>
                        <tr>
                            <td>`-n`</td>
                            <td>La cha√Æne n'est pas vide (longueur non nulle)</td>
                            <td>`[ -n "$S1" ]`</td>
                        </tr>
                        <tr>
                            <td>`>`</td>
                            <td>Sup√©rieur dans l'ordre lexicographique</td>
                            <td>`[[ "$S1" > "$S2" ]]`</td>
                        </tr>
                        <tr>
                            <td>`<`</td>
                            <td>Inf√©rieur dans l'ordre lexicographique</td>
                            <td>`[[ "$S1" < "$S2" ]]`</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="section-subtitle">Exemple de Condition IF</h3>

                <!-- Exemple 3: Condition IF -->
                <div class="code-screen">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="red"></span>
                            <span class="yellow"></span>
                            <span class="green"></span>
                        </div>
                        <div class="terminal-title font-semibold">check_config.sh ‚Äî Bash Shell</div>
                        <div>&nbsp;</div>
                    </div>
                    <div class="code-content">
                        <pre><code id="code-ex3">#!/bin/bash
# Simulation d'un fichier de config
echo "VERSION=1.0" > /tmp/config.ini 
FICHIER_CONFIG="/tmp/config.ini"
VERSION_MINIMALE="1.0"

if [[ -f "$FICHIER_CONFIG" && -r "$FICHIER_CONFIG" ]]; then
    echo "Configuration trouv√©e et accessible en lecture."
    # On v√©rifie si la version est sup√©rieure ou √©gale (Utilisation des tests num√©riques)
    if [ $(grep -oP 'VERSION=\K\d+\.\d+' "$FICHIER_CONFIG" | tr -d '.') -ge $(echo "$VERSION_MINIMALE" | tr -d '.') ]; then
        echo "La version est compatible."
    fi
    <span class="prompt">$</span> cat "$FICHIER_CONFIG" | head -n 3
    VERSION=1.0
elif [ ! -d "/etc/application" ]; then
    echo "Erreur: Le chemin de l'application est inexistant."
    exit 2
else
    echo "Avertissement: Fichier de configuration manquant ou non lisible."
fi

<span class="prompt">$</span> rm /tmp/config.ini # Nettoyage</code></pre>
                        <button class="copy-btn absolute top-3 right-3 rounded-sm text-sm" onclick="copyCode('code-ex3')">
                            Copier
                        </button>
                    </div>
                </div>
            </article>

            <!-- ARTICLE 4: Boucles (For et While) -->
            <article id="article-4" class="card">
                <h2 class="article-title">4. Structures d'It√©ration (Boucles)</h2>
                <p>
                    Les boucles `for` et `while` sont utilis√©es pour l'automatisation des t√¢ches r√©p√©titives sur des listes ou bas√©es sur une condition.
                </p>

                <h3 class="section-subtitle">It√©ration sur des Listes avec FOR</h3>
                <p>
                    La boucle `for` est id√©ale pour parcourir des collections d'√©l√©ments, typiquement des fichiers ou des r√©sultats de commandes.
                </p>

                <!-- Exemple 4: Boucle For (parcourir les fichiers) -->
                <div class="code-screen">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="red"></span>
                            <span class="yellow"></span>
                            <span class="green"></span>
                        </div>
                        <div class="terminal-title font-semibold">cleanup.sh ‚Äî Bash Shell</div>
                        <div>&nbsp;</div>
                    </div>
                    <div class="code-content">
                        <pre><code id="code-ex4">#!/bin/bash
# Simulation de fichiers temporaires
<span class="prompt">$</span> touch a.tmp b.tmp c.log

# Liste les fichiers se terminant par .tmp dans le r√©pertoire courant
for TEMP_FILE in *.tmp; do
    if [ -f "$TEMP_FILE" ]; then
        echo "Traitement du fichier temporaire: $TEMP_FILE"
        # Ajout d'une ligne de log
        echo "$(date +%H:%M:%S): Processed $TEMP_FILE" >> cleanup.log
        # rm "$TEMP_FILE" # D√©commenter pour supprimer r√©ellement
    fi
done

# Affichage du r√©sultat dans le log
<span class="prompt">$</span> cat cleanup.log
11:32:01: Processed a.tmp
11:32:01: Processed b.tmp

<span class="prompt">$</span> rm a.tmp b.tmp c.log cleanup.log # Nettoyage</code></pre>
                        <button class="copy-btn absolute top-3 right-3 rounded-sm text-sm" onclick="copyCode('code-ex4')">
                            Copier
                        </button>
                    </div>
                </div>

                <h3 class="section-subtitle">It√©ration Conditionnelle avec WHILE</h3>
                <p>
                    La boucle `while` ex√©cute son bloc de code tant que son expression conditionnelle reste vraie. Elle est souvent utilis√©e pour la lecture de donn√©es ligne par ligne.
                </p>

                <!-- Exemple 5: Boucle While (lecture de fichier) -->
                <div class="code-screen">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="red"></span>
                            <span class="yellow"></span>
                            <span class="green"></span>
                        </div>
                        <div class="terminal-title font-semibold">host_check.sh ‚Äî Bash Shell</div>
                        <div>&nbsp;</div>
                    </div>
                    <div class="code-content">
                        <pre><code id="code-ex5">#!/bin/bash
LISTE_SERVEURS="serveur1\nserveur2\nserveur3"
echo -e "$LISTE_SERVEURS" > /tmp/hosts_list.txt

# Lit le fichier ligne par ligne, en d√©sactivant le s√©parateur de champ (IFS)
while IFS= read -r HOST; do
    echo "Tentative de connexion √† l'h√¥te: $HOST..."
    # Placeholder pour une commande SSH ou ping
    # ping -c 1 $HOST
done < /tmp/hosts_list.txt

<span class="prompt">$</span> ./host_check.sh
Tentative de connexion √† l'h√¥te: serveur1...
Tentative de connexion √† l'h√¥te: serveur2...
Tentative de connexion √† l'h√¥te: serveur3...

<span class="prompt">$</span> rm /tmp/hosts_list.txt # Nettoyage</code></pre>
                        <button class="copy-btn absolute top-3 right-3 rounded-sm text-sm" onclick="copyCode('code-ex5')">
                            Copier
                        </button>
                    </div>
                </div>
            </article>

            <!-- ARTICLE 5: Fonctions -->
            <article id="article-5" class="card">
                <h2 class="article-title">5. Modularisation avec les Fonctions</h2>
                <p>
                    Les fonctions permettent d'encapsuler la logique pour la r√©utiliser et am√©liorer la lisibilit√©. Elles s'ex√©cutent dans le m√™me processus Shell.
                </p>

                <h3 class="section-subtitle">D√©finition et Gestion des Codes de Retour</h3>
                <p>
                    L'instruction `return` d√©finit le code de sortie de la fonction (0 pour succ√®s, 1-255 pour erreur). La sortie (STDOUT) de la fonction est g√©r√©e par `echo`.
                </p>

                <!-- Exemple 6: Fonction avec Argument et V√©rification -->
                <div class="code-screen">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="red"></span>
                            <span class="yellow"></span>
                            <span class="green"></span>
                        </div>
                        <div class="terminal-title font-semibold">service_status.sh ‚Äî Bash Shell</div>
                        <div>&nbsp;</div>
                    </div>
                    <div class="code-content">
                        <pre><code id="code-ex6">#!/bin/bash

# D√©finition de la fonction de v√©rification
verifier_service() {
    if [ -z "$1" ]; then
        echo "Erreur: Le nom du service est requis."
        return 1
    fi

    SERVICE_NAME="$1"

    if command -v systemctl >/dev/null; then
        echo "V√©rification de l'√©tat du service $SERVICE_NAME..."
        # NOTE: systemctl n'existe pas dans cet environnement, on simule le succ√®s (0)
        return 0 
        # systemctl is-active "$SERVICE_NAME" > /dev/null 2>&1
        # if [ "$?" -eq 0 ]; then
        #     echo "STATUT: Actif (OK)"
        #     return 0
        # else
        #     echo "STATUT: Inactif (Erreur)"
        #     return 1
        # fi
    else
        echo "Avertissement: systemctl non trouv√©, v√©rification ignor√©e."
        return 1
    fi
}

# Appel de la fonction et test du code de retour
<span class="prompt">$</span> verifier_service "nginx"
V√©rification de l'√©tat du service nginx...
# (Si systemctl existait, la ligne ci-dessous serait affich√©e)
# STATUT: Actif (OK) 

if [ "$?" -ne 0 ]; then
    echo "√âchec de la v√©rification du service NGINX."
fi</code></pre>
                        <button class="copy-btn absolute top-3 right-3 rounded-sm text-sm" onclick="copyCode('code-ex6')">
                            Copier
                        </button>
                    </div>
                </div>
            </article>

            <!-- ARTICLE 6: Structure de Choix (Case) -->
            <article id="article-6" class="card">
                <h2 class="article-title">6. Gestion des Options Multiples (CASE)</h2>
                <p>
                    La structure `case` est utilis√©e pour effectuer un choix parmi plusieurs valeurs possibles (motifs). Elle est souvent pr√©f√©r√©e √† une s√©rie complexe de `if/elif` pour la gestion des options d'un script.
                </p>

                <h3 class="section-subtitle">Syntaxe et Motifs (* et |)</h3>
                <p>
                    Chaque bloc se termine par `;;`. Le motif `*` sert de valeur par d√©faut pour capturer toute entr√©e non couverte.
                </p>

                <!-- Exemple 7: Case Statement -->
                <div class="code-screen">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="red"></span>
                            <span class="yellow"></span>
                            <span class="green"></span>
                        </div>
                        <div class="terminal-title font-semibold">tool.sh ‚Äî Bash Shell</div>
                        <div>&nbsp;</div>
                    </div>
                    <div class="code-content">
                        <pre><code id="code-ex7">#!/bin/bash
COMMANDE_UTILISATEUR=$1

case "$COMMANDE_UTILISATEUR" in
    init|setup)
        echo "D√©ploiement des d√©pendances..."
        ;;
    status)
        echo "Affichage de l'√©tat du syst√®me..."
        ;;
    clean)
        echo "Nettoyage des fichiers temporaires..."
        # find /tmp -name "*.tmp" -delete
        ;;
    help|-h|--help) # Options d'aide
        echo "Afficher l'aide de l'outil."
        ;;
    *) # Capture toutes les autres commandes
        echo "Erreur: Commande non reconnue: $COMMANDE_UTILISATEUR"
        echo "Utilisation: $0 [init|status|clean]"
        exit 1
        ;;
esac

# Exemples d'appel :
<span class="prompt">$</span> ./tool.sh init
D√©ploiement des d√©pendances...

<span class="prompt">$</span> ./tool.sh non_valide
Erreur: Commande non reconnue: non_valide
Utilisation: ./tool.sh [init|status|clean]</code></pre>
                        <button class="copy-btn absolute top-3 right-3 rounded-sm text-sm" onclick="copyCode('code-ex7')">
                            Copier
                        </button>
                    </div>
                </div>
            </article>

            <!-- ARTICLE 7: Redirection d'Entr√©e/Sortie (I/O) -->
            <article id="article-7" class="card">
                <h2 class="article-title">7. Redirection des Flux (I/O)</h2>
                <p>
                    La gestion des flux (Input/Output) permet de rediriger les donn√©es de sortie d'une commande (STDOUT et STDERR) vers un fichier ou de les utiliser comme entr√©e (STDIN) pour une autre commande.
                </p>

                <h3 class="section-subtitle">Op√©rateurs Cl√©s</h3>
                <ul class="list-disc ml-6 space-y-1 text-sm">
                    <li>`>` : Redirection de STDOUT, √©crase le fichier cible.</li>
                    <li>`>>` : Redirection de STDOUT, ajoute au fichier cible.</li>
                    <li>`2>` : Redirection de STDERR (flux d'erreur).</li>
                    <li>`&>` ou `2>&1` : Redirection de STDOUT et STDERR vers le m√™me fichier.</li>
                    <li>`|` : Pipe, connecte la sortie de la commande A √† l'entr√©e de la commande B.</li>
                </ul>

                <!-- Exemple 8: Redirection I/O -->
                <div class="code-screen">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="red"></span>
                            <span class="yellow"></span>
                            <span class="green"></span>
                        </div>
                        <div class="terminal-title font-semibold">io_capture.sh ‚Äî Bash Shell</div>
                        <div>&nbsp;</div>
                    </div>
                    <div class="code-content">
                        <pre><code id="code-ex8">#!/bin/bash
LOG_FILE="maintenance_log_$(date +%Y%m%d).log"

# SIMULATION : find /root va g√©n√©rer une erreur de permission.
# On simule cette erreur pour le d√©monstrateur.
echo "find: '/root/': Permission denied" > "$LOG_FILE"
echo "/etc/fstab" >> "$LOG_FILE"
echo "find: '/var/log/': Permission denied" >> "$LOG_FILE"

# 2. Compte le nombre d'erreurs/lignes enregistr√©es, en utilisant un pipe
NB_LIGNES=$(wc -l < "$LOG_FILE")
NB_ERREURS=$(grep -c "Permission denied" "$LOG_FILE")

echo "--- Synth√®se du journal ---"
echo "Journal cr√©√©: $LOG_FILE"
echo "Nombre total de lignes dans le journal: $NB_LIGNES"
echo "Nombre d'erreurs 'Permission denied': $NB_ERREURS"

# R√©sultat d'ex√©cution :
<span class="prompt">$</span> ./io_capture.sh
--- Synth√®se du journal ---
Journal cr√©√©: maintenance_log_20241029.log
Nombre total de lignes dans le journal: 3
Nombre d'erreurs 'Permission denied': 2

<span class="prompt">$</span> rm "$LOG_FILE" # Nettoyage</code></pre>
                        <button class="copy-btn absolute top-3 right-3 rounded-sm text-sm" onclick="copyCode('code-ex8')">
                            Copier
                        </button>
                    </div>
                </div>
            </article>
            
            <!-- NOUVELLE SECTION DE R√âF√âRENCE SYSMADMIN/DEVOPS (MISE √Ä JOUR EN VERT) -->
            <div class="guide-block">
                <!-- SysAdmin -->
                <section id="guide-sysadmin" aria-labelledby="sysadmin-title">
                    <h2 id="sysadmin-title">üîß Commandes essentielles (SysAdmin)</h2>

                    <div class="section-title">Gestion du syst√®me & utilisateurs</div>
                    <table>
                        <thead><tr><th>Commande</th><th>Description</th><th>Exemple</th></tr></thead>
                        <tbody>
                            <tr><td>hostnamectl</td><td>Voir / modifier le nom de la machine</td><td><code>sudo hostnamectl set-hostname serveur-prod</code></td></tr>
                            <tr><td>useradd / usermod / userdel</td><td>Cr√©er / modifier / supprimer un utilisateur</td><td><code>sudo useradd -m alice</code></td></tr>
                            <tr><td>passwd</td><td>Changer le mot de passe</td><td><code>sudo passwd alice</code></td></tr>
                            <tr><td>chown / chmod</td><td>Modifier droits et propri√©taires</td><td><code>sudo chown root:devops fichier.log</code></td></tr>
                        </tbody>
                    </table>

                    <div class="section-title">Stockage & partitions</div>
                    <table>
                        <thead><tr><th>Commande</th><th>R√¥le</th><th>Exemple</th></tr></thead>
                        <tbody>
                            <tr><td>df -h</td><td>Espace disque libre</td><td><code>df -h</code></td></tr>
                            <tr><td>du -sh *</td><td>Taille des dossiers</td><td><code>du -sh /var/log/*</code></td></tr>
                            <tr><td>lsblk</td><td>Afficher les partitions logiques</td><td><code>lsblk</code></td></tr>
                            <tr><td>fdisk -l</td><td>D√©tails bas niveau des disques</td><td><code>sudo fdisk -l</code></td></tr>
                        </tbody>
                    </table>

                    <div class="section-title">Fichiers & logs</div>
                    <table>
                        <thead><tr><th>Commande</th><th>Description</th><th>Exemple</th></tr></thead>
                        <tbody>
                            <tr><td>find</td><td>Rechercher un fichier</td><td><code>find /var/log -name "*.log"</code></td></tr>
                            <tr><td>grep</td><td>Filtrer du texte</td><td><code>grep "error" /var/log/syslog</code></td></tr>
                            <tr><td>tar</td><td>Archiver / compresser</td><td><code>tar -czf backup.tar.gz /etc</code></td></tr>
                            <tr><td>tail -f</td><td>Suivre un log en temps r√©el</td><td><code>tail -f /var/log/syslog</code></td></tr>
                        </tbody>
                    </table>
                </section>

                <!-- DevOps -->
                <section id="guide-devops" aria-labelledby="devops-title" class="mt-8">
                    <h2 id="devops-title">üöÄ Commandes essentielles (DevOps)</h2>

                    <div class="section-title">Docker & Conteneurs</div>
                    <table>
                        <thead><tr><th>Commande</th><th>Utilit√©</th><th>Exemple</th></tr></thead>
                        <tbody>
                            <tr><td>docker ps</td><td>Liste des conteneurs</td><td><code>docker ps -a</code></td></tr>
                            <tr><td>docker logs</td><td>Voir les logs d‚Äôun conteneur</td><td><code>docker logs nginx</code></td></tr>
                            <tr><td>docker exec -it</td><td>Entrer dans un conteneur</td><td><code>docker exec -it nginx bash</code></td></tr>
                        </tbody>
                    </table>

                    <div class="section-title">Kubernetes & CI/CD</div>
                    <table>
                        <thead><tr><th>Commande</th><th>R√¥le</th><th>Exemple</th></tr></thead>
                        <tbody>
                            <tr><td>kubectl get pods</td><td>Liste des pods</td><td><code>kubectl get pods -n dev</code></td></tr>
                            <tr><td>helm list</td><td>Liste des releases Helm</td><td><code>helm list</code></td></tr>
                            <tr><td>ansible all -m ping</td><td>Tester les connexions SSH</td><td><code>ansible all -m ping</code></td></tr>
                        </tbody>
                    </table>

                    <div class="section-title">R√©seau & supervision</div>
                    <table>
                        <thead><tr><th>Commande</th><th>Description</th><th>Exemple</th></tr></thead>
                        <tbody>
                            <tr><td>curl</td><td>Tester une requ√™te HTTP</td><td><code>curl -I https://example.com</code></td></tr>
                            <tr><td>ss -tuln</td><td>Voir les ports ouverts</td><td><code>sudo ss -tuln</code></td></tr>
                            <tr><td>dig</td><td>R√©solution DNS</td><td><code>dig google.com</code></td></tr>
                        </tbody>
                    </table>
                </section>

                <!-- Processus & R√©seau courts -->
                <section id="guide-process" class="mt-8">
                    <h2>üß† Processus & Services (rappel)</h2>
                    <table>
                        <thead><tr><th>Commande</th><th>Utilit√©</th><th>Exemple</th></tr></thead>
                        <tbody>
                            <tr><td>ps aux</td><td>Afficher processus</td><td><code>ps aux | grep nginx</code></td></tr>
                            <tr><td>pidof / pgrep</td><td>Trouver PID(s)</td><td><code>pidof sshd</code></td></tr>
                            <tr><td>kill / pkill</td><td>Terminer processus</td><td><code>sudo kill -9 2345</code></td></tr>
                            <tr><td>systemctl</td><td>G√©rer services (systemd)</td><td><code>sudo systemctl restart nginx</code></td></tr>
                        </tbody>
                    </table>
                </section>
            </div>
            <!-- FIN NOUVELLE SECTION -->
        </main>

        <footer class="text-center mt-16 pt-8 border-t border-gray-700">
            <p class="text-xs text-gray-500 tracking-wider">
                DOCUMENTATION TECHNIQUE R√âF√âRENTIELLE ‚Äî BASH SHELL SCRIPTING
            </p>
            <!-- Ligne de copyright ajout√©e -->
            <p class="text-xs text-gray-500 tracking-wider mt-2">
                &copy; <span id="current-year"></span> MBAYE | Contact: mmbaye1@hotmail.fr
            </p>
        </footer>
    </div>

    <!-- Script JavaScript pour la fonctionnalit√© de copie -->
    <script>
        /**
         * Fonction pour copier le contenu d'un bloc de code sp√©cifique au presse-papiers.
         * @param {string} elementId L'ID de l'√©l√©ment <code> √† copier.
         */
        function copyCode(elementId) {
            const codeElement = document.getElementById(elementId);
            let textToCopy = codeElement.innerText;

            // Retrait des prompts ('$' suivi d'un espace) lors de la copie pour ne r√©cup√©rer que le code/la sortie utile
            textToCopy = textToCopy.split('\n').map(line => {
                // Si la ligne commence par le prompt '$', on retire le prompt
                const trimmedLine = line.trim();
                if (trimmedLine.startsWith('$')) {
                    // Si on est certain qu'il s'agit d'une ligne d'ex√©cution simul√©e
                    return trimmedLine.substring(1).trim();
                }
                return line;
            }).join('\n').trim();

            // Utilisation de l'API moderne navigator.clipboard pour copier
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(textToCopy).then(() => {
                    showNotification("Code Copi√© !");
                }).catch(err => {
                    // Fallback en cas d'√©chec (pour l'environnement d'ex√©cution)
                    fallbackCopyTextToClipboard(textToCopy);
                });
            } else {
                // Fallback pour les environnements plus restrictifs (comme l'iframe)
                fallbackCopyTextToClipboard(textToCopy);
            }
        }

        /**
         * Fonction de fallback utilisant document.execCommand (pour compatibilit√© iframe).
         * @param {string} text Le texte √† copier.
         */
        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            textArea.style.top = "-9999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                document.execCommand('copy');
                showNotification("Code Copi√© ! (via fallback)");
            } catch (err) {
                console.error('Erreur de copie:', err);
                showNotification("Erreur de copie.", true);
            }
            document.body.removeChild(textArea);
        }

        /**
         * Affiche une notification de r√©ussite ou d'erreur.
         * @param {string} message Le message √† afficher.
         * @param {boolean} isError Indique si c'est un message d'erreur.
         */
        function showNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            notification.innerText = message;
            // R√©initialisation des classes pour garantir la visibilit√©
            notification.className = 'text-center rounded-lg shadow-lg transition-opacity duration-300';
            notification.classList.remove('hidden');
            
            // Applique les couleurs bas√©es sur l'√©tat
            if (isError) {
                notification.classList.add('bg-red-700', 'text-white');
                notification.style.backgroundColor = '#cc0000'; // Rouge erreur
                notification.style.color = 'white';
            } else {
                // Couleurs de la charte graphique pour le succ√®s
                notification.style.backgroundColor = '#00ff00'; 
                notification.style.color = '#000000';
            }
            
            // Styles de positionnement
            notification.style.position = 'fixed';
            notification.style.top = '1rem';
            notification.style.right = '1rem';
            notification.style.padding = '0.75rem 1.5rem';
            notification.style.zIndex = '1000';
            notification.style.opacity = '0';
            
            // Fait appara√Ætre la notification
            setTimeout(() => {
                notification.style.opacity = '1';
            }, 10);

            // Fait dispara√Ætre la notification apr√®s 2.5 secondes
            setTimeout(() => {
                notification.style.opacity = '0';
                // Masque l'√©l√©ment apr√®s la transition
                setTimeout(() => {
                    notification.classList.add('hidden');
                }, 300);
            }, 2500);
        }
    </script>
    
    <!-- Script pour l'ann√©e dynamique -->
    <script>
        // Met √† jour l'ann√©e actuelle dans le pied de page
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
    
    <!-- Script minimal pour boutons "Copier" et navigation interne l√©g√®re (non intrusif) (ajust√© pour √©viter conflit avec copyCode principal) -->
    <script>
    /* Script pour les boutons "Copier" des nouveaux blocs de commande SysAdmin/DevOps/Processus */
    (function(){
        // trouve tous les <pre> √† l'int√©rieur de .guide-block
        var guide = document.querySelector('.guide-block');
        if(!guide) return;
        guide.querySelectorAll('code').forEach(function(codeElement){
            // Les commandes dans les tableaux sont sous <code>
            if(codeElement.closest('td')) return; // Ignore les <code> dans les tableaux

            var pre = codeElement.closest('pre');
            if(!pre) return;

            // √©viter duplication si bouton d√©j√† pr√©sent
            if(pre.querySelector('.btn-copy')) return;
            var btn = document.createElement('button');
            btn.className = 'btn-copy';
            btn.type = 'button';
            btn.textContent = 'Copier';
            pre.style.position = 'relative'; // Assure que le bouton est positionn√© correctement

            // Ajoute le bouton √† la div ou au conteneur de pr√© (ici on le met sur pre)
            pre.appendChild(btn); 
            
            btn.addEventListener('click', function(){
                // Le texte √† copier est celui √† l'int√©rieur du <pre> (qui contient le <code>)
                var text = pre.textContent.trim(); 
                
                // Si le texte est tr√®s court (comme un exemple de commande dans une seule ligne), 
                // on ne garde que la commande elle-m√™me.
                // Pour ce bloc, on va copier le contenu du <code> pour √™tre s√ªr.
                text = codeElement.textContent.trim();

                // Utilisation de l'API moderne navigator.clipboard pour copier
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text).then(function(){
                        btn.textContent = 'Copi√© ‚úì';
                        showNotification('Code Copi√© !');
                        setTimeout(function(){ btn.textContent = 'Copier'; }, 1400);
                    }).catch(function(err){
                        btn.textContent = 'Erreur';
                        showNotification('Erreur de copie.', true);
                        setTimeout(function(){ btn.textContent = 'Copier'; }, 1400);
                        // Fallback pour les environnements plus restrictifs (comme l'iframe)
                        fallbackCopyTextToClipboard(text);
                    });
                } else {
                    // Fallback
                    fallbackCopyTextToClipboard(text);
                    btn.textContent = 'Copi√© ‚úì';
                    setTimeout(function(){ btn.textContent = 'Copier'; }, 1400);
                }
            });
        });

        // Les commandes dans les tableaux ne n√©cessitent pas de bouton de copie car elles sont courtes et isol√©es.
    })();

    /* 2) Petite fonction d'exposition: montrer / cacher sections par id (si tu veux) */
    function showGuideSection(id){
        var block = document.querySelector('.guide-block');
        if(!block) return;
        // cacher toutes les sections √† l'int√©rieur du bloc
        block.querySelectorAll('section').forEach(function(s){ s.style.display = 'none'; });
        var s = block.querySelector('#' + id);
        if(s) s.style.display = 'block';
    }
    // Par d√©faut, toutes les sections sont affich√©es (style CSS par d√©faut)
    </script>
</body>
</html>
